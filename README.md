# Sysafari å®¢æˆ·é—¨æˆ·ç³»ç»Ÿ

å®¢æˆ·é—¨æˆ·æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Web åº”ç”¨ï¼Œä¾› Sysafari ç‰©æµçš„å®¢æˆ·æŸ¥è¯¢è®¢å•ã€è´¦å•å’Œç®¡ç† API å¯†é’¥ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é˜¿é‡Œäº‘ ECS æœåŠ¡å™¨                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ERP ä¸»ç³»ç»Ÿ    â”‚  â”‚ æ¼”ç¤ºç¯å¢ƒ      â”‚  â”‚ å®¢æˆ·é—¨æˆ·      â”‚   â”‚
â”‚  â”‚ :3001         â”‚  â”‚ :3002         â”‚  â”‚ :3003         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                  â”‚                  â”‚            â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                             â”‚                               â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                      â”‚   Nginx     â”‚                        â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚               â”‚               â”‚
    api.xianfeng-eu.com  demo.xxx   portal.xianfeng-eu.com
```

## åŠŸèƒ½æ¨¡å—

| æ¨¡å— | è¯´æ˜ |
|------|------|
| ğŸ” è®¤è¯ | å®¢æˆ·ç™»å½•ã€é€€å‡ºã€ä¿®æ”¹å¯†ç  |
| ğŸ“¦ è®¢å• | è®¢å•åˆ—è¡¨ã€è¯¦æƒ…ã€ç‰©æµè·Ÿè¸ª |
| ğŸ’° è´¦å• | è´¦å•æŸ¥è¯¢ã€PDF ä¸‹è½½ã€åº”ä»˜æ¬¾ |
| ğŸ”‘ API å¯†é’¥ | åˆ›å»ºã€ç®¡ç†ã€æ’¤é”€ API å¯†é’¥ |

## æŠ€æœ¯æ ˆ

**å‰ç«¯ï¼š**
- React 18 + TypeScript
- Tailwind CSS
- Vite
- Axios

**åç«¯ï¼š**
- Node.js + Express
- PostgreSQL (portal_db)
- JWT è®¤è¯

## æœ¬åœ°å¼€å‘

### 1. å®‰è£…ä¾èµ–

```bash
# å‰ç«¯ä¾èµ–
npm install

# åç«¯ä¾èµ–
cd server && npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp scripts/aliyun/env.local.example server/.env

# ç¼–è¾‘é…ç½®
vim server/.env
```

### 3. åˆ›å»ºæ•°æ®åº“

```bash
# è¿æ¥æœ¬åœ° PostgreSQL
psql -U postgres

# åˆ›å»ºæ•°æ®åº“
CREATE DATABASE portal_db;

# åˆå§‹åŒ–è¡¨ç»“æ„
\c portal_db
\i scripts/sql/init-portal-db.sql
```

### 4. å¯åŠ¨æœåŠ¡

```bash
# ç»ˆç«¯ 1ï¼šå¯åŠ¨åç«¯ (ç«¯å£ 3003)
cd server && npm run dev

# ç»ˆç«¯ 2ï¼šå¯åŠ¨å‰ç«¯ (ç«¯å£ 5174)
npm run dev
```

### 5. è®¿é—®

- å‰ç«¯ï¼šhttp://localhost:5174
- APIï¼šhttp://localhost:3003/api/health

## éƒ¨ç½²

è¯¦è§ [éƒ¨ç½²æŒ‡å—](./scripts/aliyun/README.md)

## ç›®å½•ç»“æ„

```
sysafari-customer-portal/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # ç»„ä»¶
â”‚   â”œâ”€â”€ contexts/           # Context
â”‚   â”œâ”€â”€ pages/              # é¡µé¢
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ server/                 # åç«¯æºç 
â”‚   â”œâ”€â”€ config/             # é…ç½®
â”‚   â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ modules/            # ä¸šåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/           # è®¤è¯
â”‚   â”‚   â”œâ”€â”€ order/          # è®¢å•
â”‚   â”‚   â”œâ”€â”€ finance/        # è´¢åŠ¡
â”‚   â”‚   â””â”€â”€ api-keys/       # API å¯†é’¥
â”‚   â””â”€â”€ app.js              # å…¥å£æ–‡ä»¶
â”œâ”€â”€ scripts/                # è„šæœ¬
â”‚   â”œâ”€â”€ sql/                # SQL è„šæœ¬
â”‚   â””â”€â”€ aliyun/             # é˜¿é‡Œäº‘éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡º
â””â”€â”€ package.json
```

## API æ–‡æ¡£

### è®¤è¯

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | /api/auth/login | ç™»å½• |
| GET | /api/auth/me | è·å–å½“å‰ç”¨æˆ· |
| POST | /api/auth/change-password | ä¿®æ”¹å¯†ç  |
| POST | /api/auth/logout | é€€å‡ºç™»å½• |

### è®¢å•

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/orders | è®¢å•åˆ—è¡¨ |
| GET | /api/orders/:id | è®¢å•è¯¦æƒ… |
| GET | /api/orders/:id/tracking | ç‰©æµè·Ÿè¸ª |
| GET | /api/orders/stats/summary | è®¢å•ç»Ÿè®¡ |

### è´¢åŠ¡

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/finance/invoices | è´¦å•åˆ—è¡¨ |
| GET | /api/finance/invoices/:id | è´¦å•è¯¦æƒ… |
| GET | /api/finance/invoices/:id/download | ä¸‹è½½ PDF |
| GET | /api/finance/payables/summary | åº”ä»˜æ¬¾æ±‡æ€» |

### API å¯†é’¥

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | /api/api-keys | å¯†é’¥åˆ—è¡¨ |
| POST | /api/api-keys | åˆ›å»ºå¯†é’¥ |
| PUT | /api/api-keys/:id | æ›´æ–°å¯†é’¥ |
| DELETE | /api/api-keys/:id | æ’¤é”€å¯†é’¥ |

## è®¸å¯è¯

MIT License
# Auto deploy test Mon Jan  5 08:58:45 CST 2026

